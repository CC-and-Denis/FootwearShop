{% extends 'bases/page_frame.html.twig' %}

{% block title %}
 {{username}} profile
{% endblock %}


{% block alerts %}
    <div id="errorsBox" class="hidden">
        <div class="closeErrorsBtn">
            x
        </div>
        The product can't be deleted
    </div>

        <div class="column std-container centered bg-white shadow h-fit" id="alertBox1">
        <h1 class="text-3xl font-bold">Attention, this action is irreversible!</h1>
        <h3>Are you sure that you want to delete the selected item:</h3>
        <h3 id="itemToBeDeleted">Unknown</h3>

        <div class="row mt-3 justify-center" >
            <a class="aButton bg-red mr-10 w-32" id="buttonDelete2">Delete</a>
            <a class="aButton" id="noDelete">Don't delete</a>
        </div>
    </div>
{% endblock %}

{% block content %}
<div class="row size-full p-10 ">

    <div class="column std-container w-3/12 items-center mr-10">
        <div id="profilePic" class="rounded-full generic-img bg-semitransparent size-40" style="background-image: url({{asset('/build/images/user-regularB.df1377b9.png')}});">

        </div>
        <div class="text-3xl font-bold my-5">
            {{username}}
        </div>

        <div id="rating" class="std-container column centered w-full py-5 mb-3 h-96">
            <div class="wip size-full rounded-xl z-10">
                <div>
                This feature is coming soon...
                 </div>
            </div>

            <h1 class="text-2xl mb-2">Ratings</h1>
                {% if products|length %}
                <h1 class="my-1">Averange</h1>
                <div class="row mb-3">
                    <img src="/build/images/star-regular.6a90c9dc.png">
                    <img src="/build/images/star-regular.6a90c9dc.png">
                    <img src="/build/images/star-regular.6a90c9dc.png">
                    <img src="/build/images/star-regular.6a90c9dc.png">
                    <img src="/build/images/star-regular.6a90c9dc.png">
                </div>
                <h1 class="my-1">Individual ratings</h1>
                <div class="coloumn">
                    {% for i in range(1,5)%}
                    <div class="row mb-1">
                        <div class="mr-2">
                        0
                        </div>
                        {% for j in range(1,i) %}
                        <img src="/build/images/star-solid.86d1454e.png">
                        {% endfor %}
                    </div>
                    {% endfor%}
                </div>
                <a class="aButton p-1 mt-5">Read them!</a>
                {% else %}
                        {% if app.user.userIdentifier | lower == username | lower%}
                        <p>You have not sold anything</p>
                        <a class="aButton" href="/createproduct/">Start selling</a>
                        {% else %}
                        This User has not sold anything
                        {% endif %}
                {% endif %}
            
            

        </div>
        {% if app.user.userIdentifier | lower == username | lower %}
            <a class="aButton p-2 mb-5" href="/createproduct/">Add product</a>
            <a class="aButton bg-red p-2" href="/access/logout">Log out</a>

        {% endif %}
    </div>
    
    <div class="std-container w-full p-10">
        {% if products|length %}
        <div class="coloumn overflow-y-scroll h-full pr-2">
                {% for product in products %}
                <div class="std-container row h-52 mb-5 productContainer hover:bg-semi-transparent-3 transition-all w-full" id={{product.id}}>
                    <div class="size-44 rounded-md bg-cover bg-semitransparent mr-5" style="background-image: url({{product.mainImage}});"></div>
                    <div class="column w-9/12">
                        <h1 class="w-full text-2xl">{{product.Model}}</h1>
                        <div class=" h-full">{{product.description}}</div>
                        <div class="row">
                            <div class="priceContainer">â‚¬ {{product.price}}</div>
                            <div class="priceContainer">In stock: {{product.quantity}}</div>
                            <div class="priceContainer row"><img class="h-6 mr-1 w-7" src="/build/images/eye-regular.30a447c7.png"> {{product.views}}</div>
                            <div class="priceContainer row"><img class="size-6 mr-1" src="/build/images/cart-shopping-solid.5de20d86.png"> {{product.itemsSold}}</div>     
                        </div>
                    </div>
                    <div class="column">
                    {% if ( app.user.userIdentifier | lower == username | lower ) and product.itemsSold==0 %}
                    <a  id="{{product.id}}" class="aButton bg-red deleteButton1 mb-7 " name="{{product.model}}">Delete</a>
                    <a class="aButton size-fit w-24" href="/editproduct/{{product.id}}">Edit</a>

                    {% endif %}
                    </div>

                </div>
                {% endfor %}
            </div>
                {% else %}
    <div class="centered column h-full" >
                        {% if app.user.userIdentifier | lower == username | lower %}
                        <p>Here, products sold by you will appear</p>
                        {% else %}
                        <p>Here, products sold by {{username}} will appear</p>
                        {% endif %}
                    </div>
                {% endif %}
    </div>


</div>

{% endblock %}